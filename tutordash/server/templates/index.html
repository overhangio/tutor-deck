<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tutor Dash">

    <title>Tutor Dash</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='/img/favicon.png') }}">
    <!-- CSS -->
    <!-- <link rel="stylesheet" href="css/normalize.css"> -->
    <!-- <link rel="stylesheet" href="css/styles.css"> -->
    <link href="{{ url_for('static', filename='/css/dash.css') }}" rel="stylesheet">
    <script src="{{url_for('static', filename='/js/htmx.min.js')}}"></script>
    <script src="{{url_for('static', filename='/js/sse.js')}}"></script>
</head>

<body>
    <main>
        <nav>
            <header>
                <img src="{{ url_for('static', filename='/img/Edly Red Icon.svg') }}"/>
                <h2>Edly</h2>
            </header>
            <menu>
                <a href="{{ url_for('plugin_store') }}" id="plugin-marketplace">
                    <img id="plugin-marketplace-logo" src="{{ url_for('static', filename='/img/shopping-bag.svg') }}"/>
                    <h4>Plugin Marketplace</h4>
                </a>
                <a href="{{ url_for('plugin_installed') }}" id="my-plugins">
                    <img id="my-plugins-logo" src="{{ url_for('static', filename='/img/stack.svg') }}"/>
                    <h4>My Plugins</h4>
                </a>
                <a href="{{ url_for('local_launch') }}" id="local-launch">
                    <img id="local-launch-logo" src="{{ url_for('static', filename='/img/stack.svg') }}"/>
                    <h4>Local Launch</h4>
                </a>
            </menu>
        </nav>

        <section>
            <header>{% block workspace_header %}{% endblock %}</header>
            <section>{% block workspace_content %}{% endblock %}</section>
            <footer>{% block footer %}{% endblock %}</footer>
        </section>
    </main>

    <div class="modal-container" id="modal_container">
        <div class="modal-content">
            <div class="modal-header">
                {% block model_icon %}{% endblock %}
            </div>
            <div class="modal-body">
                <h3>{% block modal_title%}{% endblock %}</h3>
                <p>{% block modal_description %}{% endblock %}</p>
            </div>
            <div class="modal-footer">
                {% block modal_footer %}{% endblock %}
            </div>
        </div>
    </div>
    {% if toast or toast_description %}
    <div class="toast-container">
        <div class="toast">
            <div class="toast-content">
                <div class="title">
                    <img src="{{ url_for('static', filename='/img/Icon.svg' )}}">
                    <span class="text text-1"> {{ toast }} </span>
                </div>
                <div class="message">
                    <span class="text text-2"> 
                        {% if ask_local_launch %}
                        "Running local launch will allow all changes to plugins to take effect. This could take a few minutes to complete."
                        {% else %}
                        {{ toast_description }} 
                        {% endif %}
                    </span>
                </div>
            </div>
            {% if ask_local_launch %}
            <div class="toast-footer">
                <button type="button" class="modal-button close-toast-button">Not Now</button>
                <form method="POST" action="{{ url_for('cli_local_launch')}}">
                    <button class="modal-button run_modal_button" type="submit">Run Local Launch</button>
                </form>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}
    

    <script src="{{ url_for('static', filename='/js/dash.js') }}"></script>

    {% if sidebar_active_tab %}
    <script>
        document.getElementById('{{ sidebar_active_tab }}').classList.toggle('sidebar-tab-selected');
        document.getElementById('{{ sidebar_active_tab }}-logo').classList.toggle('sidebar-tab-logo-selected');
    </script>
    {% endif %}

    {% block scripts %}{% endblock %}

    {% if not show_logs %}
    <script>
        showToast("info");
    </script>
    {% endif %}
</body>

</html>
