{% extends "_base_header.html" %}

{% block page_title %}
My Plugins
{% endblock %}

{% block page_description %}
View all your installed plugins in one place.
{% endblock %}

{% block page_button %}
<button class=" open-modal-button" type="button">Local Launch</button>
{% endblock %}

{% set sidebar_active_tab = "my-plugins" %}

{% set search_endpoint = url_for('plugin_installed_list') %}

{% block workspace_content %}
<div id="plugins-list" class="installed-plugins-list" hx-get="{{ search_endpoint }}" hx-trigger="load"></div>
{% endblock %}

{% block scripts %}
<script>
    toggle_switch = document.querySelector(".switch")
    toggle_switch.onclick = function(event) {
        // If we click on the switch then do what the switch does
        // abort what the parent was going to do on click
        event.stopPropagation();
    }
    // Sets the warning that local launch needs to be executed for plugins to take effect
    function SetWarning(){
        const warningElements = document.querySelectorAll('[id^="warning-cookie-"]');
        const warningMain = document.getElementById('warning-main');
        warningElements.forEach(function(warningElement) {
            if (document.cookie.includes(warningElement.id)) {
                warningElement.style.display = 'flex';  
                warningMain.style.display = 'flex';
            }
        });
    }
    document.body.addEventListener('htmx:afterOnLoad', function(event) {
        SetWarning();
    });
</script>
{% endblock %}
